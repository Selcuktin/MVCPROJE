{% extends "admin/base.html" %}
{% load i18n admin_urls static %}

{% block content %}
<div class="page-header" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%) !important;">
    <h1><i class="fas fa-trash-alt"></i> Toplu Silme Onayı</h1>
</div>

<div class="content-card">
    <div class="content-card-body">
        {% if perms_lacking %}
        <p style="color: #ef4444; font-weight: 600;">
            <i class="fas fa-exclamation-triangle"></i>
            Aşağıdaki {{ opts.verbose_name_plural }} kayıtlarını silmek için yetkiniz yok:
        </p>
        <ul style="margin: 1rem 0 0 1.5rem; color: #7f1d1d;">
            {% for obj in perms_lacking %}
            <li>{{ obj }}</li>
            {% endfor %}
        </ul>
        {% elif protected %}
        <p style="color: #ef4444; font-weight: 600;">
            <i class="fas fa-shield-alt"></i>
            Aşağıdaki {{ opts.verbose_name_plural }} kayıtları korumalı olduğu için silinemiyor:
        </p>
        <ul style="margin: 1rem 0 0 1.5rem; color: #7f1d1d;">
            {% for obj in protected %}
            <li>{{ obj }}</li>
            {% endfor %}
        </ul>
        {% else %}
        <div style="background: #fef2f2; border: 1px solid #fecaca; border-radius: 8px; padding: 1.5rem; margin-bottom: 1.5rem;">
            <p style="margin: 0; color: #991b1b; font-weight: 600;">
                <i class="fas fa-exclamation-circle"></i>
                Seçilen {{ queryset|length }} adet {{ opts.verbose_name_plural }} kaydını silmek istediğinizden emin misiniz?
            </p>
            
            <div style="margin-top: 1rem; max-height: 200px; overflow-y: auto;">
                <ul style="margin: 0; padding-left: 1.5rem; color: #7f1d1d; font-size: 0.9rem;">
                    {% for obj in queryset %}
                    <li>{{ obj }}</li>
                    {% endfor %}
                </ul>
            </div>
            
            {% if deleted_objects %}
            <p style="margin: 1rem 0 0.5rem 0; color: #7f1d1d; font-size: 0.9rem; font-weight: 600;">
                Bu işlem aşağıdaki ilişkili kayıtları da silecektir:
            </p>
            <div style="max-height: 150px; overflow-y: auto;">
                <ul style="margin: 0; padding-left: 1.5rem; color: #7f1d1d; font-size: 0.85rem;">
                    {% for deleted_object in deleted_objects %}
                    <li>{{ deleted_object }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
        </div>
        
        <form method="post">
            {% csrf_token %}
            <input type="hidden" name="action" value="delete_selected">
            <input type="hidden" name="post" value="yes">
            {% for obj in queryset %}
            <input type="hidden" name="{{ action_checkbox_name }}" value="{{ obj.pk }}">
            {% endfor %}
            
            <div style="display: flex; gap: 1rem;">
                <a href="{% url opts|admin_urlname:'changelist' %}" 
                   style="padding: 12px 24px; background: #e5e7eb; color: #374151; border-radius: 8px; text-decoration: none; font-weight: 600;">
                    <i class="fas fa-arrow-left"></i> İptal
                </a>
                <button type="submit" 
                        style="padding: 12px 24px; background: linear-gradient(135deg, #ef4444, #dc2626); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer;">
                    <i class="fas fa-trash"></i> Evet, Hepsini Sil
                </button>
            </div>
        </form>
        {% endif %}
    </div>
</div>
{% endblock %}
